Larry is a waiter who has just lost his job and his girlfriend.
Bill is a flustered husband living off a slip and fall lawsuit settlement.
Everett is an inept security guard who was fired after only four days as a police officer, after crashing his car at a nail saloon.
The three are members of the State Military Reserves, although their duties in the reserve consist mostly of drinking and partying at the reserve center once a month.
However, with manpower shortages from the Iraq War, the three find themselves called to active duty to be deployed to United States occupation of Fallujah.
The hard nosed Sergeant Kilgore is assigned to prepare them for activation and deployment.
After a very brief period of training, they are loaded on a C-130 transport bound for Iraq.
During a thunderstorm over northern Mexico, the transport pilots dump some of their cargo to reduce their load.
Unfortunately, the three were asleep in the Humvee that was dropped and Sergeant Kilgore was pulled out along with the cargo as he was seeing where his men had gone.
When the three wake up, seeing only desert around them, they believe they have arrived in Iraq.
Sergeant Kilgore is knocked unconscious in the landing.
The three believe he is dead and bury him in a very shallow grave, then proceed to drive off to search for insurgents and members of Al-Qaida to attack.
Shortly after they leave, Sergeant Kilgore regains consciousness, quickly climbs out of the very shallow grave and pursues his clueless subordinates.
The three soldiers quickly find themselves in the small village of La Miranda, believing they are helping the town fight off terrorists and insurgents.
The village of La Miranda is being plagued by the attacks of a bandit gang led by Carlos Santana (a source of recurring humor is that he has the same name as the famous singer). Chasing away the bandits with a show of firepower, they become heroes to the villagers and capture a bandit to interrogate.
Meanwhile, Sergeant Kilgore follows along the path of his subordinates, encountering significant misfortune.
While enjoying the hospitality of La Miranda, the men eventually realize they are in Mexico, not Iraq.
Realizing the potential trouble they are in, the three men decide to return the favor to the villagers by helping them improve the village.
Later, Bill sneaks away from town to call home and talk to his wife, while Larry and Everett prepare for the bandits to return.
Bill is captured by Santana's gang, and in a showdown in La Miranda they recover him and chase Santana and his men away (although Sergeant Kilgore finally catches up, arriving at precisely the wrong moment and is captured by Santana).
The three soldiers then decide to deal with Santana and his men by following them to their hideout, where Santana's men engage in bizarre entertainment like forcing kidnapped comedians to perform for them and holding lucha libre matches.
Everett distracts them by posing as a luchador while Larry and Bill rescue Sergeant Kilgore.
Sergeant Kilgore and Bill then plant dynamite in their trucks while Larry rescues Everett as his distraction wears off.
The group escapes as the trucks of the bandits explode.
Mustering everything they have to destroy the village of La Miranda, Santana's bandits ride into town on horseback, escorting a WWII surplus Sherman Tank.
The group manages to incapacitate the tank with a vintage cannon and rally the townsfolk to resist the bandits.
At that moment, military helicopters come over the horizon and a large number of American soldiers storm the town.
Bill's wife has been calling the Pentagon and telling anyone who would listen about the three being stranded in Mexico, until they finally began searching for the group and found them.
The State Department has arranged for a cover up to call the entire mishap "Operation: Sombrero", a U.S. anti-terrorism operation done with the (retroactive) permission of the Mexican government and Santana's gang labeled as terrorists.
In the end, all four receive the Silver Star, and Bill receives the Purple Heart for being shot in the posterior during the final battle.
Sergeant Kilgore creates a successful workout program in Miami, Florida, Everett becomes a popular professional wrestler in Mexico, Bill sues the Mexican government for his injuries and uses the money to buy a house in California and Larry founds his own restaurant in Mexico and marries Maria, the daughter of La Miranda's mayor.
Carlos is sent into rehab and becomes a comedian.
Agent Cody Banks (Frankie Muniz) attends summer camp, actually a secret facility for training CIA teenage agents.
When a group of CIA soldiers attempt to abduct head counselor Victor Diaz (Keith Allen), Cody helps him escape, mistaking the CIA operation for a training exercise.
The director informs Cody that Diaz stole disks containing plans for a secret mind-control device, and sends Cody to recapture him.
In the United Kingdom, Cody poses as a summer orchestra student at the Kenworth estate to spy on owner Lord Duncan Kenworth, suspected of working with Diaz, supported by his handler, Derek (Anthony Anderson) and Kumar, Derek's right-hand man, who are disguised as a chef hired by Lady Kenworth and a taxi driver respectively.
Whilst keeping his mission a secret from his fellow students, Cody sneaks around the estate and confirms that Diaz and Duncan are working together and that they have a working prototype of the mind control device, evidenced when Duncan makes a dog serve drinks and play the piano.
The next day, Cody breaks into a lab owned by Duncan, where he sees the finished device: a microchip inserted as a filling into a tooth cavity by dentist Santiago.
Shortly afterwards Cody and Derek chase Diaz, armed with a rocket gun, through London streets, but Cody is captured by the Metropolitan Police Service and taken to Scotland Yard.
He is later freed by Emily (Hannah Spearritt), a fellow student who, similar to Cody, is actually a British MI6 undercover operative.
While Emily buys coffee and soda, henchmen sneak up on Cody, knocking him unconscious by drugging him with spray.
They kidnap him and implant him with the microchip.
Under Duncan, Santiago and Diaz's influence, Cody meets the CIA director, who is then also converted.
This is witnessed by Emily, who explains things to Derek.
To get the microchip out of Cody, Derek cuts one of Cody's gadgets, exploding Mentos mints, into a precisely minuscule amount to safely remove it.
The group later realise Diaz's plan: to implant all of the world leaders, who are all in London for a G7 summit at Buckingham Palace, effectively giving him control of the world.
Deducing that with the CIA director under Diaz's control, they may be put on a most wanted list, Cody, Derek and Emily infiltrate the party before the summit.
They explain the truth to the other students, who are performing for the guests, and urge them to keep the world leaders from attending the G7 summit.
They later proceed to do so with an impromptu performance of War, whilst Cody, Emily and Derek search for the villains.
Derek is implanted with the microchip, and is set on Cody by Santiago.
Before Santiago can kill him through Derek, Emily finds and subdues him, disabling the mind control software and rescuing the U.S. President, who was to be implanted.
Shortly after Cody kicks out Derek's microchip, the two of them remove the CIA director's microchip.
Diaz, realising that his plan has failed attempts to flee, but ends up fighting, and being defeated by Cody in the Queen's gift room, destroying numerous priceless artifacts in the process.
Duncan also attempts to escape, but is tripped by his apparently senile and blind butler, who turns out to be Emily's handler and is arrested, much to Lady Kenworth's delight as he had cruelly dumped her previously.
After the villains are arrested, Cody returns to the camp, where Derek is now in charge as reward.
Cody's parents pick him up, none the wiser about his dangerous exploits.
Alex, Cody's younger brother tries to eat a few of his explosive Mentos, but Cody tosses them into the pond where they explode harmlessly.